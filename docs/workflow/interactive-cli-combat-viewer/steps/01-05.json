{
  "task_id": "01-05",
  "project_id": "interactive-cli-combat-viewer",
  "execution_agent": "software-crafter",
  "self_contained_context": {
    "background": "Part of Phase 1: Baseline - Minimum Viable CLI. Dependency injection demonstrates hexagonal architecture compliance. Hardcoded characters\nprove integration works before adding input complexity. E2E test passing validates architecture.\n",
    "prerequisites_completed": [
      "01-04"
    ],
    "relevant_files": [
      "modules/infrastructure/cli/main.py (modify)",
      "cli.py (modify)"
    ],
    "technical_context": "Complete CLI Main entry point with dependency injection and hardcoded characters.\n\nFile: modules/infrastructure/cli/main.py\n\nImplementation:\n```python\nfrom rich.console import Console\nfrom modules.infrastructure.cli.console_output import ConsoleOutput\nfrom modules.infrastructure.cli.combat_renderer import CombatRenderer\nfrom modules.infrastructure.cli.config import CLIConfig\nfrom modules.application.combat_simulator import CombatSimulator\nfrom modules.domain.services.initiative_resolver import InitiativeResolver\nfrom modules.domain.services.attack_resolver import AttackResolver\nfrom modules.domain.services.combat_round import CombatRound\nfrom modules.infrastructure.random_dice_roller import RandomDiceRoller\nfrom modules.domain.model.character import Character\n\ndef run_cli() -> None:\n    \"\"\"Main CLI entry point.\"\"\"\n    try:\n        # Configuration\n        config = CLIConfig()  # Production mode (with delays)\n\n        # Rich Console\n        rich_console = Console()\n        console = ConsoleOutput(rich_console, config)\n\n        # Domain services\n        dice_roller = RandomDiceRoller()\n        attack_resolver = AttackResolver(dice_roller)\n        initiative_resolver = InitiativeResolver(dice_roller)\n        combat_round = CombatRound(attack_resolver)\n\n        # Application service\n        combat_simulator = CombatSimulator(initiative_resolver, combat_round)\n\n        # CLI components\n        renderer = CombatRenderer(console, config)\n\n        # Welcome\n        console.print(\"\\n=== COMBAT SIMULATOR ===\\n\")\n\n        # Hardcoded characters (Phase 1 baseline)\n        char1 = Character(\"Hero\", 50, 10)\n        char2 = Character(\"Villain\", 40, 8)\n\n        console.print(f\"Character 1: {char1.name} (HP: {char1.hp}, Attack: {char1.attack_power})\")\n        console.print(f\"Character 2: {char2.name} (HP: {char2.hp}, Attack: {char2.attack_power})\")\n        console.print(\"\")\n\n        # Run combat\n        result = combat_simulator.run_combat(char1, char2)\n\n        # Display combat\n        renderer.render_combat(result)\n\n    except KeyboardInterrupt:\n        console.print(\"\\n\u26a0\ufe0f  Combat interrupted by user. Exiting...\", style=\"yellow\")\n        import sys\n        sys.exit(130)\n    except Exception as e:\n        console.print(f\"\\n\u274c Unexpected error: {e}\", style=\"red\")\n        import sys\n        sys.exit(1)\n\nif __name__ == \"__main__\":\n    run_cli()\n```\n\nUpdate top-level cli.py:\n```python\n#!/usr/bin/env python3\n\"\"\"Convenience entry point for CLI.\"\"\"\nfrom modules.infrastructure.cli.main import run_cli\n\nif __name__ == \"__main__\":\n    run_cli()\n```\n\nManual validation:\n- python cli.py (runs complete combat, displays winner, waits for ENTER)\n- Verify welcome message displays\n- Verify hardcoded characters shown\n- Verify combat runs (initiative, rounds, victory)\n- Verify ENTER exits cleanly\n- Verify CTRL-C shows interruption message\n\nAutomated validation:\n- pytest tests/e2e/test_cli_combat.py::test_baseline -v\n- E2E test should now PASS (green phase)\n",
    "tdd_phase": "GREEN",
    "active_e2e_test": "E2E Test 1.1 (Baseline Combat) - should PASS when complete",
    "inactive_e2e_tests": "All E2E tests except the active one should remain disabled with @pytest.mark.skip or similar"
  },
  "task_specification": {
    "name": "Wire CLI Main with Hardcoded Characters",
    "description": "Complete CLI Main entry point with dependency injection and hardcoded characters.\n\nFile: modules/infrastructure/cli/main.py\n\nImplementation:\n```python\nfrom rich.console import Console\nfrom modules.infrastructure.cli.console_output import ConsoleOutput\nfrom modules.infrastructure.cli.combat_renderer import CombatRenderer\nfrom modules.infrastructure.cli.config import CLIConfig\nfrom modules.application.combat_simulator import CombatSimulator\nfrom modules.domain.services.initiative_resolver import InitiativeResolver\nfrom modules.domain.services.attack_resolver import AttackResolver\nfrom modules.domain.services.combat_round import CombatRound\nfrom modules.infrastructure.random_dice_roller import RandomDiceRoller\nfrom modules.domain.model.character import Character\n\ndef run_cli() -> None:\n    \"\"\"Main CLI entry point.\"\"\"\n    try:\n        # Configuration\n        config = CLIConfig()  # Production mode (with delays)\n\n        # Rich Console\n        rich_console = Console()\n        console = ConsoleOutput(rich_console, config)\n\n        # Domain services\n        dice_roller = RandomDiceRoller()\n        attack_resolver = AttackResolver(dice_roller)\n        initiative_resolver = InitiativeResolver(dice_roller)\n        combat_round = CombatRound(attack_resolver)\n\n        # Application service\n        combat_simulator = CombatSimulator(initiative_resolver, combat_round)\n\n        # CLI components\n        renderer = CombatRenderer(console, config)\n\n        # Welcome\n        console.print(\"\\n=== COMBAT SIMULATOR ===\\n\")\n\n        # Hardcoded characters (Phase 1 baseline)\n        char1 = Character(\"Hero\", 50, 10)\n        char2 = Character(\"Villain\", 40, 8)\n\n        console.print(f\"Character 1: {char1.name} (HP: {char1.hp}, Attack: {char1.attack_power})\")\n        console.print(f\"Character 2: {char2.name} (HP: {char2.hp}, Attack: {char2.attack_power})\")\n        console.print(\"\")\n\n        # Run combat\n        result = combat_simulator.run_combat(char1, char2)\n\n        # Display combat\n        renderer.render_combat(result)\n\n    except KeyboardInterrupt:\n        console.print(\"\\n\u26a0\ufe0f  Combat interrupted by user. Exiting...\", style=\"yellow\")\n        import sys\n        sys.exit(130)\n    except Exception as e:\n        console.print(f\"\\n\u274c Unexpected error: {e}\", style=\"red\")\n        import sys\n        sys.exit(1)\n\nif __name__ == \"__main__\":\n    run_cli()\n```\n\nUpdate top-level cli.py:\n```python\n#!/usr/bin/env python3\n\"\"\"Convenience entry point for CLI.\"\"\"\nfrom modules.infrastructure.cli.main import run_cli\n\nif __name__ == \"__main__\":\n    run_cli()\n```\n\nManual validation:\n- python cli.py (runs complete combat, displays winner, waits for ENTER)\n- Verify welcome message displays\n- Verify hardcoded characters shown\n- Verify combat runs (initiative, rounds, victory)\n- Verify ENTER exits cleanly\n- Verify CTRL-C shows interruption message\n\nAutomated validation:\n- pytest tests/e2e/test_cli_combat.py::test_baseline -v\n- E2E test should now PASS (green phase)\n",
    "motivation": "Dependency injection demonstrates hexagonal architecture compliance. Hardcoded characters\nprove integration works before adding input complexity. E2E test passing validates architecture.\n",
    "detailed_instructions": "Complete CLI Main entry point with dependency injection and hardcoded characters.\n\nFile: modules/infrastructure/cli/main.py\n\nImplementation:\n```python\nfrom rich.console import Console\nfrom modules.infrastructure.cli.console_output import ConsoleOutput\nfrom modules.infrastructure.cli.combat_renderer import CombatRenderer\nfrom modules.infrastructure.cli.config import CLIConfig\nfrom modules.application.combat_simulator import CombatSimulator\nfrom modules.domain.services.initiative_resolver import InitiativeResolver\nfrom modules.domain.services.attack_resolver import AttackResolver\nfrom modules.domain.services.combat_round import CombatRound\nfrom modules.infrastructure.random_dice_roller import RandomDiceRoller\nfrom modules.domain.model.character import Character\n\ndef run_cli() -> None:\n    \"\"\"Main CLI entry point.\"\"\"\n    try:\n        # Configuration\n        config = CLIConfig()  # Production mode (with delays)\n\n        # Rich Console\n        rich_console = Console()\n        console = ConsoleOutput(rich_console, config)\n\n        # Domain services\n        dice_roller = RandomDiceRoller()\n        attack_resolver = AttackResolver(dice_roller)\n        initiative_resolver = InitiativeResolver(dice_roller)\n        combat_round = CombatRound(attack_resolver)\n\n        # Application service\n        combat_simulator = CombatSimulator(initiative_resolver, combat_round)\n\n        # CLI components\n        renderer = CombatRenderer(console, config)\n\n        # Welcome\n        console.print(\"\\n=== COMBAT SIMULATOR ===\\n\")\n\n        # Hardcoded characters (Phase 1 baseline)\n        char1 = Character(\"Hero\", 50, 10)\n        char2 = Character(\"Villain\", 40, 8)\n\n        console.print(f\"Character 1: {char1.name} (HP: {char1.hp}, Attack: {char1.attack_power})\")\n        console.print(f\"Character 2: {char2.name} (HP: {char2.hp}, Attack: {char2.attack_power})\")\n        console.print(\"\")\n\n        # Run combat\n        result = combat_simulator.run_combat(char1, char2)\n\n        # Display combat\n        renderer.render_combat(result)\n\n    except KeyboardInterrupt:\n        console.print(\"\\n\u26a0\ufe0f  Combat interrupted by user. Exiting...\", style=\"yellow\")\n        import sys\n        sys.exit(130)\n    except Exception as e:\n        console.print(f\"\\n\u274c Unexpected error: {e}\", style=\"red\")\n        import sys\n        sys.exit(1)\n\nif __name__ == \"__main__\":\n    run_cli()\n```\n\nUpdate top-level cli.py:\n```python\n#!/usr/bin/env python3\n\"\"\"Convenience entry point for CLI.\"\"\"\nfrom modules.infrastructure.cli.main import run_cli\n\nif __name__ == \"__main__\":\n    run_cli()\n```\n\nManual validation:\n- python cli.py (runs complete combat, displays winner, waits for ENTER)\n- Verify welcome message displays\n- Verify hardcoded characters shown\n- Verify combat runs (initiative, rounds, victory)\n- Verify ENTER exits cleanly\n- Verify CTRL-C shows interruption message\n\nAutomated validation:\n- pytest tests/e2e/test_cli_combat.py::test_baseline -v\n- E2E test should now PASS (green phase)\n",
    "acceptance_criteria": [
      "run_cli() creates all dependencies via DI",
      "Hardcoded characters (Hero, Villain) created",
      "CombatSimulator called with characters",
      "CombatRenderer displays combat result",
      "KeyboardInterrupt handled gracefully",
      "Exception handling catches unexpected errors",
      "Manual test: python cli.py completes successfully",
      "E2E Test 1.1 PASSES (green phase)"
    ],
    "estimated_hours": 1.0
  },
  "dependencies": {
    "requires": [
      "01-04"
    ],
    "blocking": [
      "01-06"
    ]
  },
  "state": {
    "status": "TODO",
    "assigned_to": null,
    "started_at": null,
    "completed_at": null,
    "updated": "2026-01-10T12:41:07.248054+00:00"
  }
}
